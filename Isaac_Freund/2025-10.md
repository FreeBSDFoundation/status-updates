# October 2025 Status Update for Isaac Freund

[//]: <> (### Add weekly updates in reverse chronological order. ###)

## **Reporting Period:** 2025-10-21 - 2025-10-28

### Project: pkg
#### **Overall Status:** On Track
#### **Summary**

Landed large improvement in scheduler behavior/performance when many ports are installed: https://github.com/freebsd/pkg/pull/2547

Based on the original case motivating the change, time spent in the scheduler has gone from several minutes down to around 5 seconds.

Spent time working towards solving an issue in the pkg solver that results in unnecessary/unwanted packages being installed: https://github.com/freebsd/pkg/issues/2520

#### **Completed Tasks**

- Fixed the new unit test ensuring the new scheduler logic does not regress.
- Landed https://github.com/freebsd/pkg/pull/2547
- Attended the pkgbase 15.0 sync.

#### **Features Delivered**

- System upgrades using pkg that finish in a somewhat reasonable timeframe. (With the next pkg release at least)

#### **Challenges**

- The pkg solver is poorly isolated from the rest of the pkg codebase and it is hard to understand what exactly the inputs to the solver algorithm are/where they come from. This is essentially the root cause of https://github.com/freebsd/pkg/issues/2520.

#### **Blockers**

- Nothing currently

#### **Next Steps**

- Prioritize working on https://github.com/freebsd/pkg/issues/2520
    - Don't forget to invest time in better debugging infrastructure/visualization if/when I get stuck.
- Make further performance improvements to the scheduler to completely eliminate the ~5 second hang with many ports installed.

#### **Open Questions and Discussion**

- None

## **Reporting Period:** 2025-10-14 - 2025-10-21

### Project: pkg
#### **Overall Status:** On Track
#### **Summary**

Worked towards solving https://github.com/freebsd/pkg/issues/2538

#### **Completed Tasks**

- Added debugging code to export the scheduling graph as a graphviz DOT file.
- This was a very good decision, being able to visually inspect non-trivial graphs from real upgrades rather than isolated unit tests immediately revealed some undesirable behavior.
- Started tweaking the definition of edges (dependencies) in the scheduling graph to address the issue.

#### **Features Delivered**

- Nothing for the end-user, the current goal is to fix buggy behavior in pkg.

#### **Challenges**

- pkg's test suite only covers small isolated cases and doesn't always reflect real-world usage.

#### **Blockers**

- Nothing currently

#### **Next Steps**

- More testing for the behavioral changes to the scheduler
- Fix the unit test currently broken by these changes.

#### **Open Questions and Discussion**

- Will this be enough to fully address https://github.com/freebsd/pkg/issues/2538 in practice or will further performance improvements be needed? I have several performance enhancements planned out but don't need to spend time implementing them if this behavioral change is sufficient.

[//]: <> (##########################################################)
