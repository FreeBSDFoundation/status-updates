# December 2025 Status Update for Christos Margiolis

## **Reporting Period:** 2025-12-16 - 2025-12-22

### Project: Audio Stack Improvements

**Overall Status:** On Track

#### Completed Tasks

- Several unsubmitted MIDI patches.

#### Ongoing Tasks

- sound: Unlock around uiomove() in midi_{read,write}(): https://reviews.freebsd.org/D54130
- sound: Retire softintr argument from mpu401_init(): https://reviews.freebsd.org/D54287
- [PR 289284](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=289284)
- [PR 291853](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291853)

#### Code Reviews

- sound examples: Add mmap example: https://reviews.freebsd.org/D53749
- sound: Check sndstat_register return value: https://reviews.freebsd.org/D54337

### Project: Graphics Stack Development

**Overall Status:** Catching up

#### Code Reviews

- eventfd: Add refcounting: https://reviews.freebsd.org/D50849
- eventfd: Add eventfd_signal(): https://reviews.freebsd.org/D50850
- linuxkpi: Add eventfd_*(): https://reviews.freebsd.org/D50853

## **Reporting Period:** 2025-12-09 - 2025-12-15

### Project: Audio Stack Improvements

**Overall Status:** On Track

#### Completed Tasks

- MFC'd recent commits to stable/15.
- sound: Stop building midi as a module: https://reviews.freebsd.org/D54125
- sound: Retire snd_midi->qlock: https://reviews.freebsd.org/D54129
- sound: Do not check for NULL before free(): https://reviews.freebsd.org/D54174
- sound: Merge midi_destroy() with midi_uninit(): https://reviews.freebsd.org/D54192
- Several more unsubmitted MIDI patches.

#### Ongoing Tasks

- sound: Retire midi_devs and mstat_lock: https://reviews.freebsd.org/D54126
- sound: Unlock around uiomove() in midi_{read,write}(): https://reviews.freebsd.org/D54130
- [PR 290300](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290300)
	- Had a debugging call with jrm@.
- [PR 291639](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291639)
- [PR 291424](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291424)

#### Code Reviews

- sound/midi: Clarify MPU-401 init: https://github.com/freebsd/freebsd-src/pull/1905
- sound/pci: Enable MIDI code in emu10kx: https://github.com/freebsd/freebsd-src/pull/1904
- sound/pci: Enable MIDI code in cmi: https://github.com/freebsd/freebsd-src/pull/1921

### Project: Graphics Stack Development

**Overall Status:** Getting started

#### Completed Tasks

- Set up a development environment.

#### Ongoing Tasks

- Testing [dumbbell's@ LinuxKPI patches](https://github.com/dumbbell/freebsd-src/commits/drm-related-linuxkpi-changes/)
- Testing [Linux 6.10 drm-kmod](https://github.com/freebsd/drm-kmod/pull/371)

#### Code Reviews

- kernel: Add `%pV` to kernel's printf format string: https://reviews.freebsd.org/D48763
- eventfd: Rename struct eventfd to struct eventfd_ctx: https://reviews.freebsd.org/D50848
- linuxkpi: Add eventfd_*(): https://reviews.freebsd.org/D50853
- linuxkpi: Avoid trailing whitespaces in lkpi_hex_dump(): https://reviews.freebsd.org/D51558

## **Reporting Period:** 2025-12-02 - 2025-12-08

### Project: Audio Stack Improvements

**Overall Status:** On Track

#### Completed Tasks

- Reviewed edited draft of my upcoming FBSDF article on audio.
- sndctl(8): Do not free and re-open device: https://cgit.freebsd.org/src/commit/?id=643a606fa2742b94f6eca620119b7d2686ca9cd3
- sound: Retire pcm_feeder->desc_static: https://reviews.freebsd.org/D54103

#### Ongoing Tasks

- snd_uaudio: Do not use pcm_channel->lock to protect uaudio_chan: https://reviews.freebsd.org/D54102
- sndctl(8): Add libxo support: https://reviews.freebsd.org/D54032
- sound: Stop building midi as a module: https://reviews.freebsd.org/D54125
- sound: Retire midi_devs and mstat_lock: https://reviews.freebsd.org/D54126
	- Also addresses [PR 261071](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=261071).
- snd_dummy: Initial MIDI support: https://reviews.freebsd.org/D54127
- sound: Retire snd_midi->qlock: https://reviews.freebsd.org/D54129
- sound: Unlock around uiomove() in midi_{read,write}(): https://reviews.freebsd.org/D54130
- sound: Improve snd_midi->{in,out}q allocation: https://reviews.freebsd.org/D54131
- sound: Move sndstat out of pcm/: https://reviews.freebsd.org/D54140
- sound: Take device type into account in sndstat: https://reviews.freebsd.org/D54141
- [PR 291356](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291356)
- [PR 291424](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291424)
- Addressing several race conditions in sound(4), and trying to come up with a
  way to handle locking in a cleaner and more robust way.

#### Code Reviews

- sound/midi: Use only one lock to protect the data of a MIDI device: https://github.com/freebsd/freebsd-src/pull/1902
- sound/pci: Enable MIDI code in emu10kx: https://github.com/freebsd/freebsd-src/pull/1904
- sound/midi: Clarify MPU-401 init: https://github.com/freebsd/freebsd-src/pull/1905
- sound examples: Add mmap example: https://reviews.freebsd.org/D53749
- sound examples: Check if setting property was successful: https://reviews.freebsd.org/D54038
