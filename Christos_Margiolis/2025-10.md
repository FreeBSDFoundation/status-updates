# October 2025 Status Update for Christos Margiolis

## **Reporting Period:** 2025-10-21 - 2025-10-27

### Project: Audio Stack Improvemnts

**Overall Status:** On Track

#### Completed Tasks

- sndctl(8): Modify vchans only on supported directions:
  https://cgit.freebsd.org/src/commit/?id=70b34fbdbea13c006a724844caa53f59e0e53bd0
- snd_dummy: Create device alias:
  https://cgit.freebsd.org/src/commit/?id=2693d6c7c9cab28967de13233342fcf9281e5636
- snd_dummy.4: Use sound(4) instead of PCM:
  https://cgit.freebsd.org/src/commit/?id=d6432907f6120ff4993de7352ca62f6986fb910c
- sound: Improve dsp_cdevsw style:
  https://cgit.freebsd.org/src/commit/?id=4bab868a122b9c853865c8d89886d9354d0f242b
- snd_dummy: Round channel pointer after each write:
  https://cgit.freebsd.org/src/commit/?id=364864ea91abbd8a9a79578168fa5d34e05200a7
- Bug triaging
- Sent first draft of FreeBSD Journal audio article for review.

#### Ongoing Tasks

- sound: Add kqueue support: https://reviews.freebsd.org/D53029
	- More improvements.
- sound tests: Test polling: https://reviews.freebsd.org/D53188
	- Debugging problems with the read tests. Seemingly related to the fact
	  we handle recording channels in `sound(4)`.
- Debugging a `KASSERT()` panic in `sndbuf_acquire()`, reported by pho@ using
  stress2.
	- The issue is probably related to a race condition inside
	  `chn_write()`. Trying out different patches with pho@.
- [PR 290496](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290496)

#### Code Reviews

- kqueue(9): add EXAMPLES section: https://reviews.freebsd.org/D53244
- sound: Extend examples with polling mechanisms:
  https://reviews.freebsd.org/D53353

## **Reporting Period:** 2025-10-14 - 2025-10-20

### Project: Audio Stack Improvemnts

**Overall Status:** On Track

#### Completed Tasks

- libsamplerate: Define as PRIVATELIB:
  https://cgit.freebsd.org/src/commit/?h=stable/15&id=44114a581fba9ffc551328e89c1db3d2588cc9fe
	- MFC'd to stable/15. Fixes recent pkg fallouts with
	  `audio/virtual_oss_{sndio,bluetooth}`
- virtual_oss: Clean up rcorder:
  https://cgit.freebsd.org/src/commit/?id=188ddc15e5460b3abfb2ad5492557911465bedc1
- audio/sndio: Add virtual_oss to rcorder:
  https://cgit.freebsd.org/ports/commit/?id=47a060bc66e9d2ee24417f58b8e58d13e7dd2250
- virtual_oss(8): Retire unused utils.h:
  https://cgit.freebsd.org/src/commit/?id=30a873ee3739dfd44b233907534ec1c33c21b78a
- devd/snd.conf: Note that any command can be used for the action:
  https://cgit.freebsd.org/src/commit/?id=56eee778325b2c839cfbc86a7fec4a355c51ba58
- Helped people with sound issues in the mailing lists and privately.
- Attended Foundation Laptop Project monthly meeting.
- Bug triaging.

#### Ongoing Tasks

- sound: Add kqueue support: https://reviews.freebsd.org/D53029
- sound tests: Test polling: https://reviews.freebsd.org/D53188
- snd_dummy: Create a device alias: https://reviews.freebsd.org/D53237
- sndctl(8): Modify vchans only on supported directions:
  https://reviews.freebsd.org/D53233
- Debugging a `KASSERT()` panic in `sndbuf_acquire()`, reported by pho@ using
  stress2.
- [PR 251660](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=251660)
- [PR 290300](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290300)
- Writing FreeBSD Journal audio article.

#### Code Reviews

- virtual_oss: Move plugins to the sound package:
  https://reviews.freebsd.org/D53015
