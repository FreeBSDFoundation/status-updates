# Decemer 2025 Status Update for Hans Rosenfeld

[//]: <Week 51>
## **Reporting Period:** [2025-12-08] - [2025-12-14]

### Project: Full CPUID Control for bhyve
#### **Overall Status:** On Track
#### **Summary**

Revisisted the code reviews for the CPUID prototype work I did in July, which correspond to steps 1 and 2 of the project proposal. Addressed outstanding review comments. Implemented a new bhyve cpuid option to select the CPUID fallback style (AMD vs. Intel).

#### **Completed Tasks**
Already accepted reviews, not yet committed:
- amd64: add missing include sys/pcpu.h to vmm_host.h and md_var.h: [D51550](https://reviews.freebsd.org/D51550)
- bhyve: want walk_config_nodes: [D51551](https://reviews.freebsd.org/D51551)
- vmm/amd64: port illumos#16223: bhyve returns bogus cpuid 8000_001D leaf: [D53210](https://reviews.freebsd.org/D53210)
- vmm/amd64: VM_SET_CPUID ioctl should refuse zero-entry non-legacy cpuid cfg: [D51553](https://reviews.freebsd.org/D51553)
- libvmmapi/amd64: add support for CPUID ioctls to libvmmapi: [D51554](https://reviews.freebsd.org/D51554)
- bhyvectl/amd64: add --get-cpuid-cfg: [D51556](https://reviews.freebsd.org/D51556)

Still under review:
- vmm/amd64: port illumos#14485: bhyve needs better cpuid control: [D51552](https://reviews.freebsd.org/D51552)
- bhyve/amd64: parse cpuid options: [D51555](https://reviews.freebsd.org/D51555)

#### **Next Steps**
- Implement `strtonumx()` for FreeBSD and use it in [D51555](https:/reviews.freebsd.org/D51555). (`strtonumx()` is an extension to `strtonum()` originating in illumos that allows parsing numbers in any base from 2 to 36 rather than just base 10.)
- Begin with step 3: Implement support for automatically overriding those parts of the CPUID information which need to differ between vCPUs in a VM, or which should not be directly user-settable for other reasons, such as APIC IDs and CPU topology information.

#### **Open Questions and Discussion**
How do I get accepted changes committed?

[//]: <> (##########################################################)
