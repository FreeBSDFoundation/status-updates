# December 2025 Status Update for Olivier Certner

For the very beginning of December, see previous month's status report.

## **Reporting Period:** 2025-12-20 - 2025-12-31

Off.


## **Reporting Period:** 2025-12-17 - 2025-12-19

### Power / Hibernate (S4) \[Laptop Project\]
- Read more ACPI doc and our ACPI code that I will need to modify.
- Attend the weekly meeting.

### MFC to `stable/14`
MFC all my backlog, including:

- Fixes for RPC/NFS.
- `mdo(1)`'s revamped manual page.
- Bugs in `setcred(2)` (32-bit compatibility, panic on resource accounting).
- An additional VM domainset iteration fix.

### Misc
- Create [D54271](https://reviews.freebsd.org/D54271) ("jail: Don't define malloc type M_PRISON_RACCT on !RACCT") and commit.
- Create [D54284](https://reviews.freebsd.org/D54284) ("kern: racct: Remove code unused since %cpu resource computation revamp") and commit.


## **Reporting Period:** 2025-12-10 - 2025-12-16

Was ill and had to completely stop working for more than 1 1/2 labor day.

### Power / Suspend-to-idle (S0ix) \[Laptop Project\]
- A lot more reading of ACPI spec and related documents, to continue reviewing
  [D48387](https://reviews.freebsd.org/D48387) ("acpi_spmc: Add SPMC (system
  power management controller) driver").

### Power / Hibernate (S4) \[Laptop Project\]
- Read some Linux doc about software suspend and interrupts.
- Attend the weekly meeting.

### Dynamic P-state support (CPPC) \[Laptop Project\]
- [D49587](https://reviews.freebsd.org/D49587) ("hwpstate: add CPPC support for
  pstate driver on AMD")
  - Add a comment clarifying part of my latest review, where there were two
    statements whose common consequences were not considered explicitly.
  - Review new changes, and request some additional ones (there may be
    a misunderstanding on the fact that there is one softc per core).

### Misc
- Try to help `thj@` analyze the Framework's UART console problem.

### `mac_do(4)`/`mdo(1)`
- FreeBSD Journal article: Review the first draft, sending back a comprehensive
  list of typos and changes to Jim Maurer.

### unionfs(4)
- Review [D53988](https://reviews.freebsd.org/D53988) ("unionfs: Implement
  VOP_GETLOWVNODE and employ it for basicmount-time deadlock detection"): Had
  missed a detail which makes the change work in the usual case, so in the end
  accept it.
- Review [D54229](https://reviews.freebsd.org/D54229) ("unionfs: Support
  renaming symbolic links") : Would like to see duplicated code (perhaps half of
  the change) factored out; Suggest to call `VOP_READLINK()` directly on the
  lower vnode to avoid an indirection; Overall, validate.

### MAC framework (mac(4))
- Review [D53953](https://reviews.freebsd.org/D53953) ("kern: mac: add a MAC
  label to struct prison"): Review changes, comment, approve.
- Review [D53954](https://reviews.freebsd.org/D53954) ("[RFC] kern: mac: add
  various jail MAC hooks"): Review changes, request some more, spot
  a compilation problem, discuss some fine points with `kevans@`.

### Review of Others' Work
- [D54234](https://reviews.freebsd.org/D54234) ("proc_dtor(): style
  improvements") : Approve.
- [D54227](https://reviews.freebsd.org/D54227) ("Add a tac utility") : I support
  the idea but not the current implementation, which could be much better with
  less than 10% of lines via a "hook" in `tail(1)`.


## **Reporting Period:** 2025-12-03 - 2025-12-09

### Suspend-to-idle (S0ix) \[Laptop Project\]
- Reading to understand the context
  - Look at [D52705](https://reviews.freebsd.org/D52705) ("acpi: Use sleep types
    defined in sys/power.h") and more generally a lot of validated reviews in
    the stack.
  - Read manual pages and notes about devices, drivers and buses in FreeBSD.
  - Read some relevant passages from the ACPI spec, the Intel ACPI S0 Low Power
    Idle document and Microsoft's page on "Modern Standby".
  - Read some Linux code.
- Review [D48734](https://reviews.freebsd.org/D48734) ("acpi: Suspend-to-idle
  support (s2idle)"): First round; current codedoes not compile !x86
  architectures.
- Review [D48387](https://reviews.freebsd.org/D48387) ("acpi_spmc: Add SPMC
  (system power management controller) driver"): First round, about the
  different _DSM IDs and functions.

### Hibernate (S4) \[Laptop Project\]
- Read some Linux code about the "physical pages snapshot" mentioned in the
  docs.  Figure out that they do it by duplicating memory (!).

### Dynamic P-state support (CPPC) \[Laptop Project\]
- Review [D49587](https://reviews.freebsd.org/D49587) ("hwpstate: add CPPC
  support for pstate driver on AMD"), indicating two possible directions with
  respect to state memorization.
- Eye at our Intel implementation as well (`hwpstate_intel(4)`).  It could use
  some code re-architecture and more user-friendly knobs (no separate package
  control knob), and could also give access to more processor tunables.  It also
  has at least a minor bug (as spotted by myself a while ago and recently again
  by `aokblast@`).

### Laptop Project
- Attend the Iteration Planning meeting, talk about S0ix and S4.

### `mac_do(4)`/`mdo(1)`
- Answer mail "Regarding PAM support for mdo" on `freebsd-security@`.
- Send an updated talk proposal to AsiaBSDCon 2026.

### MAC framework (mac(4))
- Review [D53954](https://reviews.freebsd.org/D53954) ("[RFC] kern: mac: add
  various jail MAC hooks"): Post first round of comments.

### unionfs(4)
- Review [D53988](https://reviews.freebsd.org/D53988) ("unionfs: Implement
  VOP_GETLOWVNODE and employ it for basicmount-time deadlock detection"):
  Request changes, as the current proposal will break `cp(1)` and more generally
  `copy_file_range(2)`, and propose some alternatives.

### `srcmgr@` Lurker
- Discuss C symbols visibility in connection with the different standards and
  what can be requested via the `POSIX_C_SOURCE`, `_Cxx_SOURCE`, and
  `_ISOCxx_SOURCE` macros, and whether we should take into account
  `__STDC_VERSION__` and when in `sys/sys/_visible.h` (on-going).

### Misc
- Answer `ronald@`'s mail ("make it possible to compile bouncycastle with
  jdk21") with a more complete patch (to support also OpenJDK 11), which he
  eventually committed.

### Review of Others' Work
- [D54040](https://reviews.freebsd.org/D54040) ("thread0: Clear td_rux stats in
  proc0_post")
- Suggest and review [D54049](https://reviews.freebsd.org/D54049) ("ruxreset:
  Add an inline function to reset all the stats in rusage_ext").  Try to
  convince people to use `bzero()` to initialize a structure rather than each
  separately, and that `bzero()` is a better interface than `memset()`.
- [D54050](https://reviews.freebsd.org/D54050) ("proc0_post: Clear relevant
  thread stats directly")
- [D54039](https://reviews.freebsd.org/D54039) ("thread0: Stop calling thread0
  "swapper"")
- [D54051](https://reviews.freebsd.org/D54051) ("sys: Remove/update references
  to the swapper process in various comments")
- [D54052](https://reviews.freebsd.org/D54052) ("MAC: Rename mac_cred_create_swapper to mac_cred_create_kproc0")
