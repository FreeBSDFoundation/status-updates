# November 2025 Status Update for Olivier Certner

For the very beginning of November, see previous month's status report.


## **Reporting Period:** 2025-11-26 - 2025-12-02

### `mac_do(4)`/`mdo(1)`
- Finish the new `mdo(1)` manual page.  Publish it in
  [D53905](https://reviews.freebsd.org/D53905) ("mdo.1: Document group-related
  and fine-grained control functionalities").  Make modifications prompted by
  ``ziaee@``'s comments.  Commit in `main`, MFC to `stable/15` and ask
  `cperciva@` to merge it to `releng/15.0` (done).
- FreeBSD Papers: GitHub issue
  [#154](https://github.com/freebsd/freebsd-papers/issues/154): The link to my
  EuroBSDCon 2025's slides does not work.  Investigate.  Several tests seem to
  point at some `nginx` configuration problem.
- Analyze a crash report in `setcred(2)` from `pho@` produced by fuzzy testing
  (`stress2`).  This is some bad error case handling bug that I introduced in
  a recent simplification commit (which is only in `main`).  Fixed in [commit
  000d5b52c19f](https://cgit.freebsd.org/src/commit/?id=000d5b52c19f)
  ("setcred(2): Fix a panic on too many groups from latest commit").
- Manage the GSoC's GitHub [pull
  requests](https://github.com/OlCe2/freebsd-src/pulls?q=is%3Apr+is%3Aopen+mac_do+OR+mdo+)
  by answering a comment on one and updating the status of another.

### `15.0-RELEASE`, Release Notes
- Add or rework paragraphs on my work, including `ps(1)`, SMBIOS-related
  changes, work on gradual graphics slowdown with DRM drivers, VM domainset
  fixes, etc.
- Create [D53985](https://reviews.freebsd.org/D53985) ("releases/15.0R/relnotes:
  Use 13.0R formatting for "Sponsored by").  Commit it after ``emaste@``'s
  approval.
- Update the versions of updated contrib software.
- Take all notes from ``src``'s `RELNOTES` and ensure there is some matching
  text in the website's release notes.  In most cases, rewrite them myself.
- Lots of formatting changes, and typo and commit hash fixes.
- Try to enroll more people on the task, as the release announcement was only
  hours away.
- Approve [D54007](https://reviews.freebsd.org/D54007)
  ("releases/15.0R/relnotes: Add udbc driver").
- Approve [D54013](https://reviews.freebsd.org/D54013) ("15.0/relnotes: Mention
  mandoc update").
- Approve [D54014](https://reviews.freebsd.org/D54014) ("15.0/relnotes: Improve bmake, bc, spleen listings").

### MAC framework (mac(4))
- Review [D53953](https://reviews.freebsd.org/D53953) ("kern: mac: add a MAC label to struct prison"): Post first round of comments.
- Review [D53954](https://reviews.freebsd.org/D53954) ("[RFC] kern: mac: add various jail MAC hooks"): Preparing first round of comments (WIP).
- Review [D53957](https://reviews.freebsd.org/D53957) ("kern: mac: pull mac_label_copyin_string out"): Approve.

### `srcmgr@` Lurker
- Attend the meeting.
- Raise the topic of ``15.0-RELEASE``'s Release Notes, notably the problems
  I have been seen there, for advice and help.

### Misc
- [Commit d9e734d65084](https://cgit.freebsd.org/src/commit/?id=d9e734d65084)
  ("exterrvar.h: style(9): Fix two small nits").

### Review of Others' Work
- [D53980](https://reviews.freebsd.org/D53980) ("sys/_types.h: Unbreak gcc build"): Approve.
- [D53728](https://reviews.freebsd.org/D53728) ("kern: Introduce RLIMIT_VMM"): Approve.


## **Reporting Period:** 2025-11-19 - 2025-11-25

### Hibernate (S4)
- Attend the meeting for the first time.
- Start writing a document on how to save the current memory.

### `mac_do(4)`/`mdo(1)`
- Work on the FreeBSD Journal article.  Send a complete draft to `thj@` and
  start working with Jim Maurer for final editing.  Also send a copy to `bapt@`
  for feedback (great!).
- 32-bit compatibility bug long-term fix: More discussions and final validations
  for [D53755](https://reviews.freebsd.org/D53755) and
  [D53756](https://reviews.freebsd.org/D53756), see report for previous period
  below.
- Commit [D53771](https://reviews.freebsd.org/D53771) ("mdo(1): Avoid calling
  getgroups() in some unnecessary cases").
- Commit [D53772](https://reviews.freebsd.org/D53772) ("setcred(): Remove an
  optimization for when cr_groups[0] was the egid").
- Start revamping `mdo(1)`'s manual page to include all the new functionality
  about groups and fine-grained control over real, effective and saved variant,
  see [D52613](https://reviews.freebsd.org/D52613) ("mdo(1): Add support and
  shortcuts for fully specifying users and groups") and corresponding [commit
  3ca1e69028ac](https://cgit.freebsd.org/src/commit/?id=3ca1e69028ac) to `main`.
  Started from Kushagra Srivastava (GSoC 2025 student)'s
  [version](https://github.com/OlCe2/freebsd-src/pull/7).  Near completion.  To
  be included in 15.0, so need to finish it urgently.

### MFC
- Prepare MFC to `stable/14` of commits of mine (and some others) corresponding
  to the work done since September (which either was from the start in
  `stable/15` or was MFCed to it later).  WIP.

### Review of Others' Work
- [D53728](https://reviews.freebsd.org/D53728) ("kern: Introduce RLIMIT_VMM"):
  Ask to document what is the point of this new resource limit (what is not
  covered by other ones? kernel memory? are there hardware restrictions to the
  number of VMMs?).
- [D53899](https://reviews.freebsd.org/D53899) ("arp: Reduce lifetime of ARP
  entries"): Note that most settings for ARP could be set to negative values,
  which don't make sense (pre-existing problem). Suggest a simplification.


## **Reporting Period:** 2025-11-12 - 2025-11-18

### `mac_do(4)`/`mdo(1)`
- Work on the FreeBSD Journal article.  Send a mostly complete first draft to
  `thj@`.
- Read some code from and doc for `libcasper(3)` and `cap_pwd(3)` in order to
  see how they could fit extending `mdo(1)` to support asking for passwords.
  Unfortunately, they cannot be used as is, as the daemon is forked from the
  launching executable and has the same credentials.
- In [D47878](https://reviews.freebsd.org/D47878) ("MAC: syscalls:
  mac_label_copyin(): 32-bit compatibility"), `jhb@` reports a bug where not all
  fields of the 32-bit `struct setcred` are copied into the internal 64-bit one.
  Confirm the bug.
- Create [D53767](https://reviews.freebsd.org/D53767) ("setcred(): Fix 32-bit
  compatibility copy-in") as a minimal fix to the bug.  MFC it to `stable/15`
  and have `cperciva@` include it for 15.0.
- Review refactoring and longer-term fix by `jhb@`:
  - [D53755](https://reviews.freebsd.org/D53755) ("MAC: Use the current thread's
    user ABI to determine the layout of struct mac"): Request using `void *` for
    a pointer to a polymorphic object. Discuss the problem of by-mistake
    dereference of userland pointers in the kernel, and hint at ways to prevent
    it at compile-time.
  - [D53756](https://reviews.freebsd.org/D53756) ("setcred: Move initial copyin
    of struct setcred out to per-ABI syscall"): Insist for the `const` on
    a function argument to be preserved.  (Try to) Educate people on the review
    on both the usefulness and harmlessness of doing this.
  - [D53757](https://reviews.freebsd.org/D53757) ("freebsd32_setcred: Copy all
    of the setcred fields individually"): This is the longer-term fix, which
    however needs to list all fiels of `struct setcred`, which the previous
    `memcpy()` avoided.  Whether this is actual progress is debatable, but
    accept it as this is the current style.
- Create [D53771](https://reviews.freebsd.org/D53771) ("mdo(1): Avoid calling
  getgroups() in some unnecessary cases").
- Create [D53772](https://reviews.freebsd.org/D53772) ("setcred(): Remove an
  optimization for when cr_groups[0] was the egid").

### Review of Others' Work
- [D52628](https://reviews.freebsd.org/D52628) ("vfs: fix races between vdrop
  and VOP_UNLOCK").

## **Reporting Period:** 2025-11-05 - 2025-11-11

Reduced period again, as I was traveling to the Vendor Summit and the 11/11 is
off.

### `mac_do(4)`/`mdo(1)`
- Work on the FreeBSD Journal article.
- PR 290352
  - [D53455](https://reviews.freebsd.org/D53455),
    [D53456](https://reviews.freebsd.org/D53456),
    [D53457](https://reviews.freebsd.org/D53457): MFC to stable/15
  - [D53456](https://reviews.freebsd.org/D53456),
    [D53457](https://reviews.freebsd.org/D53457): MFC to releng/15.0.
  - [D53563](https://reviews.freebsd.org/D53563): Commit.  I messed up the
    tests, and this change caused a panic at boot on INVARIANTS kernel, so was
    reverted by markj@.
  - Create [D53636](https://reviews.freebsd.org/D53636) ("proc_set_cred(): Allow
    'newcred' to have multiple references") as a prerequisite for
    [D53563](https://reviews.freebsd.org/D53563).
  - Commit [D53636](https://reviews.freebsd.org/D53636) and recommit
    [D53563](https://reviews.freebsd.org/D53563).

### Vendor Summit
- Meet with people from several companies and discuss about their needs.
- Participate to a round-robin session, promoting recent work on
  `mac_do(4)`/`mdo(1)`, on DRM improvements for AMD GPUs and the scheduler.

### Review of Others' Work
- [D53640](https://reviews.freebsd.org/D53640) ("rm(1): remove whiteouts when
  forcibly removing directories"): Approve, as per an older discussion on
  [D45987](https://reviews.freebsd.org/D45987) ("tmpfs: Account for whiteouts
  during rename/rmdir").
- [D53598](https://reviews.freebsd.org/D53598) ("cd9660: Unbreak symbolic
  links")Â : Approve, suggesting a small simplification.
