# November 2025 Status Update for Olivier Certner

For the very beginning of November, see previous month's status report.


## **Reporting Period:** 2025-11-19 - 2025-11-25

### S4 Suspend
- Attend the meeting for the first time.
- Start writing a document on how to save the current memory.

### `mac_do(4)`/`mdo(1)`
- Work on the FreeBSD Journal article.  Send a complete draft to `thj@` and
  start working with Jim Maurer for final editing.  Also send a copy to `bapt@`
  for feedback (great!).
- 32-bit compatibility bug long-term fix: More discussions and final validations
  for D53755 and D53756, see report for previous period below.
- Commit D53771 ("mdo(1): Avoid calling getgroups() in some unnecessary cases").
- Commit D53772 ("setcred(): Remove an optimization for when cr_groups[0] was
  the egid").
- Start revamping `mdo(1)`'s manual page to include all the new functionality
  about groups and fine-grained control over real, effective and saved variant,
  see D52613 ("mdo(1): Add support and shortcuts for fully specifying users and
  groups") and corresponding commit 3ca1e69028ac to `main`.  Started from
  Kushagra Srivastava (GSoC 2025 student)'s
  [version](https://github.com/OlCe2/freebsd-src/pull/7).  Near completion.

### Review of others' work
- D53728 ("kern: Introduce RLIMIT_VMM"): Ask to document what is the point of
  this new resource limit (what is not covered by other ones? kernel memory? are
  there hardware restrictions to the number of VMMs?).
- D53899 ("arp: Reduce lifetime of ARP entries"): Note that most settings for
  ARP could be set to negative values, which don't make sense (pre-existing
  problem). Suggest a simplification.


## **Reporting Period:** 2025-11-12 - 2025-11-18

### `mac_do(4)`/`mdo(1)`
- Work on the FreeBSD Journal article.  Send a mostly complete first draft to
  `thj@`.
- Read some code from and doc for `libcasper(3)` and `cap_pwd(3)` in order to
  see how they could fit extending `mdo(1)` to support asking for passwords.
  Unfortunately, they cannot be used as is, as the daemon is forked from the
  launching executable and has the same credentials.
- In D47878 ("MAC: syscalls: mac_label_copyin(): 32-bit compatibility"), `jhb@`
  reports a bug where not all fields of the 32-bit `struct setcred` are copied
  into the internal 64-bit one.  Confirm the bug.
- Create D53767 ("setcred(): Fix 32-bit compatibility copy-in") as a minimal fix
  to the bug.  MFC it to `stable/15` and have `cperciva@` include it for 15.0.
- Review refactoring and longer-term fix by `jhb@`:
  - D53755 ("MAC: Use the current thread's user ABI to determine the layout of
    struct mac"): Request using `void *` for a pointer to a polymorphic
    object. Discuss the problem of by-mistake dereference of userland pointers
    in the kernel, and hint at ways to prevent it at compile-time.
  - D53756 ("setcred: Move initial copyin of struct setcred out to per-ABI
    syscall"): Insist for the `const` on a function argument to be preserved.
    (Try to) Educate people on the review on both the usefulness and
    harmlessness of doing this.
  - D53757 ("freebsd32_setcred: Copy all of the setcred fields individually"):
    This is the longer-term fix, which however needs to list all fiels of
    `struct setcred`, which the previous `memcpy()` avoided.  Whether this is
    actual progress is debatable, but accept it as this is the current style.
- Create D53771 ("mdo(1): Avoid calling getgroups() in some unnecessary cases").
- Create D53772 ("setcred(): Remove an optimization for when cr_groups[0] was
  the egid").

### Review of others' work
- D52628 ("vfs: fix races between vdrop and VOP_UNLOCK").

## **Reporting Period:** 2025-11-05 - 2025-11-11

Reduced period again, as I was traveling to the Vendor Summit and the 11/11 is
off.

### `mac_do(4)`/`mdo(1)`
- Work on the FreeBSD Journal article.
- PR 290352
  - D53455, D53456, D53457: MFC to stable/15
  - D53456, D53457: MFC to releng/15.0.
  - D53563: Commit.  I messed up the tests, and this change caused a panic at
    boot on INVARIANTS kernel, so was reverted by markj@.
  - Create D53636 ("proc_set_cred(): Allow 'newcred' to have multiple
    references") as a prerequisite for D53563.
  - Commit D53636 and recommit D53563.

### Vendor Summit
- Meet with people from several companies and discuss about their needs.
- Participate to a round-robin session, promoting recent work on
  `mac_do(4)`/`mdo(1)`, on DRM improvements for AMD GPUs and the scheduler.

### Review of others' work
- D53640 ("rm(1): remove whiteouts when forcibly removing directories"):
  Approve, as per an older discussion on D45987 ("tmpfs: Account for whiteouts
  during rename/rmdir").
- D53598 ("cd9660: Unbreak symbolic links")Â : Approve, suggesting a small simplification.
