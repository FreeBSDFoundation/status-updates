# December 2025 Status Update for Bjoern Zeeb

## **Reporting Period:** 2025-12-22 - 2025-12-28

Working on rtw88/rtw89/mt76 (7921/7922) there are multiple common problems on the
way to 11n/11ac support, which are currently debugged.

As a note upfront: testing has become more time consuming as I am now testing on
(at least) amd64 and arm64 with:
- iwlwifi(4) AX101, AX200/210, (and BE200 to some degree),
- rtw88(4) 8821C, 8822B, 8822C,
- rtw89(4) 8852A, (and occasionally 8852C)
- mt76/mt7921(4) MT7922 (and other chipsets 7615, 7915, 7925, 7996 even if not working yet),
- two more chipsets from another vendor to enable in main soon.
Having busdma bounce work on arm64 and bhyve with passthru on arm64 would
make it massively easier for me.

#### **Completed Tasks**

- [x] BAR (Block Ack Request) stalls packets indefinitely is fixed and works; tested with rtw89.
- [x] Bug fixes discovered during the last two weeks pushed out of the working tree.

#### **Ongoing**

- [ ] txrate is never raised despite all drivers report to do their own rate control;
      this remains true for rtw88/rtw89/mt76 but at the point of writing has changed
      for a 4th driver I kept working on in the background.
      The current assumption is that some of the MLD/MLO work has pushed certain
      updates out to per-link changes in the drivers (at least for rtw89/mt76) that
      we do not implement given we are not doing 802.11be yet.
      As a result code was adjusted and some downcalls were implemented and have
      helped in parts already.  At least one more needs to be adjusted but in order
      to not pessimize the current in-tree state I will first ....
- [ ] upstream changes in small, individual commits before adding more on top.


### Project: Mediatek mt76 wireless driver work on FreeBSD
#### **Overall Status:** Blocked
#### **Summary**

#### **Ongoing**

- [ ] 11n and 11ac support (see common part)
      There seems to be a missing condition on a latest change as packets stopped
      passing again.  It is good to have working IPv6 as MC is handled differently
      and is a good test candidation against IPv4 unicast.
      The change will be identified as I continue to upstream changes in small junks.

#### **Blockers**

- [ ] LinuxKPI `struct page` work.
- [ ] LinuxKPI `page pool` work.
- [ ] drm-kmod integrating PAGE_IS_LKPI_PAGE work.

### Project: 802.11ac support for Realtek rtw88 and rtw89 wireless drivers
#### **Overall Status:** Being worked on
#### **Summary**

#### **Ongoing**

- [ ] 11n and 11ac support (see common part)

#### **Completed Tasks**

- [x] reworked the ``emulate chanctx`` functions as the subtle doings of them along
      with channel switch was found to be not working as desired.  rtw89 seems fine,
      rtw88 needs further testing.


## **Reporting Period:** 2025-12-15 - 2025-12-21

Working on rtw88/rtw89/mt76 (7921/7922) there are multiple common problems on the
way to 11n/11ac support, which are currently debugged.

#### **Ongoing**

- [ ] BAR (Block Ack Request) stalls packets indefinitely
- [ ] txrate is never raised despite all driver report to do their own rate control.

#### **Completed Tasks**

- [x] fixed some channel/rate work as a monitor node would see the VHT packets
      but the chipset itself would only see later resends at basic rate.

### Project: Mediatek mt76 wireless driver work on FreeBSD
#### **Overall Status:** Blocked
#### **Summary**

#### **Ongoing**

- [ ] 11n and 11ac support (see common part)

#### **Completed Tasks**

- [x] Opened a drm-kmod Pull request which will make it compile with PAGE_IS_LKPI_PAGE

#### **Blockers**

- [ ] LinuxKPI `struct page` work.
- [ ] LinuxKPI `page pool` work.
	No news here but that Linux 6.19-rc<n> looks promisigns fixing some problems
	I created a local workaround for.

### Project: 802.11ac support for Realtek rtw88 and rtw89 wireless drivers
#### **Overall Status:** Being worked on
#### **Summary**

#### **Ongoing**

- [ ] 11n and 11ac support (see common part)


## **Reporting Period:** 2025-12-08 - 2025-12-14

In general I have three (rtw88, rtw89, mt76) (plus one more) drivers sitting more
or less at the same situation currently, which are the priority at the moment:

- [ ] work on 11n and 11ac in progress
      depending on driver (or chipset) one or the other things works already
      or not:
      HW Crypto offload for TX and RX, Block ACK (BA), and as a side given
      I am testing a lot on IPv6, multicast.


### Project: Mediatek mt76 wireless driver work on FreeBSD
#### **Overall Status:** On Track but blocked
#### **Summary**

Some Framework Laptops are shipping with Mediatek MT7922 chipsets.  But users in
general (PR264300) are requesting support for various Mediatek WiFi chipsets.
See also https://github.com/FreeBSDFoundation/proj-laptop/issues/66 .

#### **Completed Tasks**

- [x] Full firmware update

#### **Ongoing**

- [ ] 11n and 11ac support
- [ ] Testing other mt76 chipsets (I believe I have a full set of cards for the modules
       we currently would build in sys/modules/mt76);  this is low-priority currently.
- [ ] Figure out how to get my sample code for the Blockers out of my tree (read: into main);
      this will wait a few days as conflicting changes for graphics are in review and I need
      to do an update afterwards.

#### **Blockers**

- [ ] LinuxKPI `struct page` work.
- [ ] LinuxKPI `page pool` work.
      I have a rudimentary hacked up version of both which does not yet
      meet even LinuxKPI standards but does the job to the next panic.
- [ ] drm-kmod at least will need cleanup for the above to land in any way.


### Project: 802.11ac support for Realtek rtw88 and rtw89 wireless drivers
#### **Overall Status:** Being worked on
#### **Summary**

#### **Completed Tasks**

- [x] rtw89 seems to be come more stable for me, MC started working more reliable;
      both the locking and the MC change were pushed into main
- [x] got more cards for different chipsets
- [x] firmware update done

#### **Ongoing**

- [ ] 11n and 11ac support
- [ ] Rename tunables (or get rid of them again).
      Needs to be coordinated with iwlwifi and other drivers as well as firmware ports
      so it will depend on how the general 11n and 11ac support ends up.

### Miscellaneous
#### **Summary**

In addition to Realtek and Mediatek maintainance tasks are also on the radar.
These inlcude maintaining wireless drivers, bug fixes, and LinuxKPI changes for
wireless.

#### **Ongoing and Completed Tasks**

- [ ] More iwlwifi(4) PRs are on the table.
- [x] MFCs
- [ ] MFCs (next batch)
- [x] Finish the firmware ports update  (Thanks for the help of jrm)
- [x] Finish a 2nd round of firmware updates as removing kmod support made version
      numbers to go backwards.  (Thanks for the help of jrm)
- [ ] Finish vendor imports. Update LinuxKPI bits for that.  Seems more general
      LinuxKPI infrastructure than wireless.
- [x] Other LinuxKPI reviews


## **Reporting Period:** 2025-12-01 - 2025-12-07

### Project: Mediatek mt76 wireless driver work on FreeBSD
#### **Overall Status:** On Track but blocked
#### **Summary**

Some Framework Laptops are shipping with Mediatek MT7922 chipsets.  But users in
general (PR264300) are requesting support for various Mediatek WiFi chipsets.
See also https://github.com/FreeBSDFoundation/proj-laptop/issues/66 .

#### **Completed Tasks**

- [x] Upstream some code which was easy to extract.
- [x] Fixed the problem of EAPOL frames not going out, so now we get a handshake
      and data packets at basic rates.
      I had an iperf -t 0 (infinite) run (only doing about 5 Mbit/s) for 2 days
      without problem.
- [x] Contacted Martin Filla who works on an MT SoC support for FreeBSD:
      https://www.freebsd.org/status/report-2025-07-2025-09/#_freebsd_driver_development_for_bananapi_r64
- [ ] Started to test mt7915 to get that working as well.
      Behaves with different problems on amd64 vs. arm64.  Fixed some LinuxKPI bits.
- [x] Ordered more WiFi cards with different Mediatek chipsets (MT7612, MT7615, MT7991).

#### **Next Steps**

- [ ] Still have to test MT7925.  Need to shuffle cards which I try to keep to a minimum.
- [ ] Get us to 11n and 11ac.
      The current plan was to do this alongside rtw8x 11n and 11ac support.
- [ ] Figure out how to get my sample code for the Blockers out of my tree (read: into main).

#### **Blockers**

- [ ] LinuxKPI `struct page` work.
- [ ] LinuxKPI `page pool` work.
      I have a rudimentary hacked up version of both which does not yet
      meet even LinuxKPI standards but does the job to the next panic.
- [ ] drm-kmod at least will need cleanup for the above to land in any way.


### Project: 802.11ac support for Realtek rtw88 and rtw89 wireless drivers
#### **Overall Status:** Being worked on
#### **Summary**

Realtek rtw88(4) and rtw89(4) wireless drivers are currently limited to
802.11a/b/g due to extra LinuxKPI support needed beyond the KPI usage
of iwlwifi(4).

#### **Completed Tasks**

- [ ] Debugeed the first queueing problems which lead to crashes to get rtw89 more stable.
      Fixes need to be finalized and landed in main.
- [ ] Debugging a problem with multicast not working (reliably).
      Also seen this with a different driver (not yet supported in FreeBSD) recently.

#### **Next Steps**

- [ ] Debug what keeps us away from 11n and 11ac in both directions.
      This will likely also include other unrelated stability problems that need sorting.
- [ ] Firmware updates for rtw8x.
- [ ] Rename tunables (or get rid of them again).
      Needs to be coordinated with iwlwifi and other drivers as well as firmware ports.


### Miscellaneous
#### **Summary**

In addition to Realtek and Mediatek maintainance tasks are also on the radar.
These inlcude maintaining wireless drivers, bug fixes, and LinuxKPI changes for
wireless.

#### **Ongoing and Completed Tasks**

- [x] Deal with some iwlwifi(4) related problem reports.
      Some of this is email follow-up, other included LinuxKPI patches which are
      put to users for testing but need committing.
- [ ] More iwlwifi(4) PRs are on the table.
- [x] Done vendor imports for Linux v6.18 based wireless driver versions.
- [x] Merged rtw88 and ath10k as they needed no further changes.
- [x] Updated last outstanding review to firmware ports updates.

#### **Next Steps**

- [ ] MFCs
- [ ] Finish the firmware ports update
- [ ] Finish vendor imports. Update LinuxKPI bits for that.  Seems more general
      LinuxKPI infrastructure than wireless.

