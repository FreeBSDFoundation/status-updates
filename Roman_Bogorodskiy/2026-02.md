# 02 2026 Status Update for Roman Bogorodskiy

## **Reporting Period:** [2026-02-23] - [2026-02-28]

### Project: libvirt on FreeBSD
#### **Overall Status:** On Track
#### **Summary**

I was able to [bisect](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290735#c8)
the bhyve suspend/resume issue using my KVM-based nested virtualization setup.

I was troubleshooting and testing the libvirt volume download issue,
which was luckily
[fixed](https://gitlab.com/libvirt/libvirt/-/commit/39b3b2eb375774536692afe6d1d9862b5ba2a3ac).

I have implemented the initial support for NUMA domains configuration in
the libvirt driver. I will give it some more testing, add more validation and tests
and will submit for review.

#### **Completed Tasks**

 * Bhyve suspend/resume issue bisecting.
 * Libvirt volume download troubleshooting/testing.

#### **Blockers**

Outline of the `bhyve` issues that are either blockers or create
a noticeable inconvenience for development:

 * [bootindex not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=279720),
 * [resume issues](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290735),
 * [tpm issues](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=287326),
 * [virtio-input not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290364),
 * [arm64 CPU frequency reporting not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291810),
 * Lack of capabilities reporting in bhyve.

#### **Next Steps**

 * Complete the NUMA configuration support for the libvirt driver.
 * As I can now run VMs with multiple NUMA domains, I need to also verify
   that the libvirtd on the host properly reports NUMA capabilities/topology.
 * Start working on running libvirt-tck tests against the latest -CURRENT snapshot
   as a part of my CI (at least as a proof of concept for now).

---

## **Reporting Period:** [2026-02-16] - [2026-02-22]

### Project: libvirt on FreeBSD
#### **Overall Status:** On Track
#### **Summary**

Fixed some more failing libvirt-tck/arm64 test and
[configured](https://github.com/novel/libvirt-freebsd-ci/blob/master/jenkins/libvirt_tck_git_arm64.groovy)
my local Jenkins instance to run libvirt-tck test suite on my Quartz64 board as a part
of FreeBSD libvirt CI.

The only remaining test to be fixed is the one that checks NVRAM files handing.
As I used only u-boot on bhyve/arm64, I need to think what's the good way
to test it. Maybe I'll need to extend the driver to also support UEFI for arm64.

I created a [PR](https://gitlab.com/libvirt/libvirt-tck/-/merge_requests/74/)
for libvirt-tck to make VM boot timeout configurable to account the slow Quartz64 board.

I merged the vcpu pinning configuration support for the libvirt bhyve driver.

I was troubleshooting the
[volume download regression](https://lists.libvirt.org/archives/list/devel@lists.libvirt.org/thread/SHKX7LXYQXJAIWBOIR6PBUYALBM3ZPOA/)
which, unfortunately, I do not know how to fix yet.

I also set up Linux/KVM host for nested virtualization. That is, I run Fedora Linux
as a host OS, run FreeBSD guest as a KVM virtual machine, and inside of that run another
FreeBSD guest as a bhyve virtual machine. This setup works, though some
[workarounds](https://gitlab.com/qemu-project/qemu/-/issues/337) are required.

My main goal is to eventually extend the CI setup to run libvirt-tck against various FreeBSD versions,
mainly against -CURRENT snapshots. The current jails-based approach is less flexible in that sense.
The short-term goal/experiment is to find a suspend/resume regression using 'git bisect' and
validating each revision using virtual machines.

#### **Completed Tasks**

 * Merged vcpu pinning support for the libvirt/bhyve driver.

#### **Blockers**

Outline of the `bhyve` issues that are either blockers or create
a noticeable inconvenience for development:

 * [bootindex not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=279720),
 * [resume issues](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290735),
 * [tpm issues](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=287326),
 * [virtio-input not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290364),
 * [arm64 CPU frequency reporting not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291810),
 * Lack of capabilities reporting in bhyve.

#### **Next Steps**

 * Continue working on improving/extending CI.
 * Continue troubleshooting the volume download issues.
 * Implement NUMA domains configuration.

---

## **Reporting Period:** [2026-02-09] - [2026-02-15]

### Project: libvirt on FreeBSD
#### **Overall Status:** On Track
#### **Summary**

Getting close to libvirt-tck/arm64 test runs, currently have:

```
RESULTS    : PASS 23 | ERROR 4 | FAIL 1 | SKIP 2 | WARN 0 | INTERRUPT 0 | CANCEL 0                                                                                                                                                                                      
JOB TIME   : 1291.50 s  
```

Merged a couple of the libvirt/bhyve driver patches that make running arm64 easier.

The cpu pinning patch for the libvirt/bhyve driver still waits for review. 

#### **Completed Tasks**

 * Merged the bhyve/arm64 loader handling improvements.
 * Merged deprecation of the legacy options.

#### **Blockers**

Outline of the `bhyve` issues that are either blockers or create
a noticeable inconvenience for development:

 * [bootindex not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=279720),
 * [resume issues](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290735),
 * [tpm issues](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=287326),
 * [virtio-input not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290364),
 * [arm64 CPU frequency reporting not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291810),
 * Lack of capabilities reporting in bhyve.

#### **Next Steps**

 * Continue working on arm64 support.
 * Triage the remaining test failures for libvirt-tck/arm64.

---

## **Reporting Period:** [2026-02-02] - [2026-02-08]

### Project: libvirt on FreeBSD
#### **Overall Status:** On Track
#### **Summary**

This week I was mainly iterating on the reviews on my libvirt/bhyve arm64 related patches.

I have also completed the vcpu pinning configuration support which is now also
[on review](https://lists.libvirt.org/archives/list/devel@lists.libvirt.org/thread/CVIUH4DX5ELQFYKPHRQ6OXBJ6STU264D/).

Moving forward with running libvirt-tck integration tests on the Quartz64 board.
At the moment I have it running against libvirt built from my integration branch.
There are some failures and errors. For domain tests I get:

```
RESULTS    : PASS 19 | ERROR 5 | FAIL 5 | SKIP 1 | WARN 0 | INTERRUPT 0 | CANCEL 0                                                                                                                                                                                      
JOB TIME   : 1043.44 s   
```

I believe at least some of them are caused by configuration issues. Will continue looking into that.

#### **Completed Tasks**

 * None for this week.

#### **Blockers**

Outline of the `bhyve` issues that are either blockers or create
a noticeable inconvenience for development:

 * [bootindex not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=279720),
 * [resume issues](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290735),
 * [tpm issues](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=287326),
 * [virtio-input not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290364),
 * [arm64 CPU frequency reporting not working](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291810),
 * Lack of capabilities reporting in bhyve.

#### **Next Steps**

 * Continue working on arm64 support.
 * Extend my libvirt-ci with libvirt-tck runs on the Quartz64 board.
