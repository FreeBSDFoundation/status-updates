# February Status Update for Tom Jones

## **Reporting Period:** 2026-02-03 - 2025-02-10

### Project: Improve FreeBSD Power Usage 
#### **Overall Status:** On Track
#### **Summary**

FreeBSD runs on devices from high end servers through laptops and desktops down
to small embedded systems. On all systems it is a benefit if FreeBSD can use
the lowest practical amount of energy while still providing performance
responsive to user requests.

The foundation is look at various power management technologies in modern
devices with a focus on laptops.

This project aims to improve the introspectability of FreeBSD systems to better
understand which systems are contributing most to power usage. The initial
tasks in this activity look at creating tools and measurements to help design
the tools to investigate power usage. The ultimate goal of the project is to
meet the '8 hour working time' goal of the laptop project.

#### **Ongoing Tasks**
- [ ] Design a power profile and control board for usb-c devices
- [ ] upstream freebsd build host support for ch32fun
- [ ] extend perfetto with freebsd providers for:
    - [ ] sysctl
    - [ ] dtrace

    I have written a dtrace provider for perfetto using the C SDK. It is
    available on the branch here:

    https://codeberg.org/tj/perfetto/src/branch/thj/sdk-dtrace

    It is able to taken a configuration set of probes via the config file
    parameter, but there is one remaining issue of actually getting data
    recorded.

    Once I have resolved this I will start experimenting with the configuration
    API to understand what is more desirable to implement.

### Project: Improve FreeBSD Kernel Debugging
#### **Overall Status:** On Track
#### **Summary**

FreeBSD offers a variety of kernel debugging interfaces, the main interface
available on all systems is using the system console, typically via a graphics
interface. On modern system the graphics driver is routed via a GPU which
requires a lot of code to drive. This can lead to situations when the graphics
system crashes or the graphics output stops functioning where interactive
debugging is impossible or debugging at all isn't possible.

This project aims to provide a debugging mechanism that will work in the
absence of a functional graphics driver, first by updating and upstreaming xHCI
debug, by documenting and improving other debug interfaces and my adding
support for debugging interfaces in newer systems.

#### **Ongoing Tasks**
- [ ] Test loader support
    I have update the review to head and I am actively seeking reviewers.
- [ ] Test kernel support
- [ ] Track down stall in host mode driver
    I have started examaning the xhci interface to understand how to debug the
    stalls.

#### ** Completed Tasks**

- [x] Debug issues with xhci adapter board
    I think the combination of adapters is breaking expected circuit impedence
    for the usb-c leading to the usb3 port never detecting a device. I want to
    try with further cables, but this suggests to me that these adapters aren't
    workable.

## Misc items

- [x] commited support for the H616 SOC
