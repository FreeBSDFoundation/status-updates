# December Status Update for Tom Jones

## **Reporting Period:** 2025-12-09 - 2025-12-16 (Week 50)

### Project: Improve FreeBSD Kernel Debugging
#### **Overall Status:** On Track
#### **Summary**

FreeBSD offers a variety of kernel debugging interfaces, the main interface
available on all systems is using the system console, typically via a graphics
interface. On modern system the graphics driver is routed via a GPU which
requires a lot of code to drive. This can lead to situations when the graphics
system crashes or the graphics output stops functioning where interactive
debugging is impossible or debugging at all isn't possible.

This project aims to provide a debugging mechanism that will work in the
absence of a functional graphics driver, first by updating and upstreaming xHCI
debug, by documenting and improving other debug interfaces and my adding
support for debugging interfaces in newer systems.

#### **Ongoing Tasks**
- [ ] Test loader support
- [ ] Test kernel support
- [ ] Track down stall in host mode driver
- [ ] Debug framework SOC uart issues
    I have spent quite a bit more time debugging this and raised questions with
    several other developers. It appears something is missing in our early boot
    mapping which means this acpi uart isn't available. There is a chance that
    on other platforms we get this for "free" and firmware leaves a mapping in
    place which isn't happening on the framework laptop.

    Linux can use this device as an early console with some caveats related to
    baud rate. Tracing early output using an oscilloscope shows now output
    bytes during early boot so this isn't the issue here.

    I will continue working on this next year.


## **Reporting Period:** 2025-12-02 - 2025-12-09 (Week 49)

### Project: Improve FreeBSD Kernel Debugging
#### **Overall Status:** On Track
#### **Summary**

FreeBSD offers a variety of kernel debugging interfaces, the main interface
available on all systems is using the system console, typically via a graphics
interface. On modern system the graphics driver is routed via a GPU which
requires a lot of code to drive. This can lead to situations when the graphics
system crashes or the graphics output stops functioning where interactive
debugging is impossible or debugging at all isn't possible.

This project aims to provide a debugging mechanism that will work in the
absence of a functional graphics driver, first by updating and upstreaming xHCI
debug, by documenting and improving other debug interfaces and my adding
support for debugging interfaces in newer systems.

#### **Completed Tasks**
- [x] Commit some extracted patches from loader patchset

#### **Ongoing Tasks**
- [ ] Test loader support
- [ ] Test kernel support
- [ ] Track down stall in host mode driver
- [ ] Debug framework SOC uart issues
    I have tracked this down to a couple of different things. We will create a
    uart which doesn't map to any device if it is configured by the default
    device.hints.

    We don't seem to be propigating the mmio address for a mmio uart correctly
    through to a device during early console. This leaves us with a working
    system console, but only if activated late in boot.
