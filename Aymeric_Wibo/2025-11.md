# November 2025 Status Update for Aymeric Wibo

[//]: <> (### Add weekly updates in reverse chronological order. ###)

## **Reporting Period:** 2025-11-25 - 2025-12-1

### Project: Laptop S0i3 Support

**Overall Status:** On Track

#### **Summary**

- Fix setting sysctl to NONE issue ([PR 290651](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290651), [D53909](https://reviews.freebsd.org/D53909))
- Write new ACPI D-state setting code, have to test this and clean this up before making revision.
- Update [D52861](https://reviews.freebsd.org/D52861) to remove previous IDs completely. Should "fix" [PR 290827](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=290827).

#### **Challenges**

- My machine doesn't seem to be exiting S0i3 with the new D-state code + USB4 driver loaded.

#### **Blockers**

None.

#### **Next Steps**

- Open revision for new ACPI D-state code and make sure all works.
- Figure out why I can't exit S0i3.
- Commit s2idle support: [D48734](https://reviews.freebsd.org/D48734).
- Pretty much same items from last reporting period.

[//]: <> (##########################################################)

## **Reporting Period:** 2025-10-29 - 2025-11-04

### Project: Laptop S0i3 Support

**Overall Status:** On Track

#### **Summary**

Not much work done on the USB4 HCM code or suspend this past week.

#### **Challenges**

- Committing of [D48385](https://reviews.freebsd.org/D48385) and [D48386](https://reviews.freebsd.org/D48386) (necessary for properly entering S0ix states) revealed some (fairly large) issues with FreeBSD's D-state code, which meant that S3 on some machines for which it previously worked regressed. These had to be reverted until I finish rewriting the D-state code.
- USB4 hotplug events are not triggering interrupts so the rings get filled and the USB4 controller has to be reset after each suspend as a temporary workaround to get S0i3 entry working (S0i3 is blocked on AMD by running USB4 controllers).

#### **Blockers**

None.

#### **Next Steps**

- Rewrite FreeBSD's ACPI D-state code.
- Commit SPMC driver: [D48387](https://reviews.freebsd.org/D48387) (depends on new D-state code and the aforementioned D48385 and D48386).
- Commit s2idle support: [D48734](https://reviews.freebsd.org/D48734). This doesn't depend on anything special that hasn't already been committed.
- Enable S0i3 entry by telling AMD SMU's PMFW to enter S0i3: [D48721](https://reviews.freebsd.org/D48721). Depends on s2idle support, the SPMC driver, and some minor scheduler changes.

[//]: <> (##########################################################)
