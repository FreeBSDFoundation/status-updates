# December 2025 Status Update for Aymeric Wibo

[//]: <> (### Add weekly updates in reverse chronological order. ###)

## **Reporting Period:** 2025-12-23 - 2025-12-30

### Project: Laptop S0i3 Support

**Overall Status:** At Risk

#### **Summary**

- Update and fix comments made in the s2idle patch: [D48734 - acpi: Suspend-to-idle support (s2idle)](https://reviews.freebsd.org/D48734).
- Update and fix comments made in the SPMC patch: [D48387 - acpi_spmc: Add SPMC (system power management controller) driver](https://reviews.freebsd.org/D48387)
- Create [D54406 - acpi: Make taskqueue only run on CPU0](https://reviews.freebsd.org/D54406).
- Create [D54407 - sched: Flag to force scheduler to always choose idle thread](https://reviews.freebsd.org/D54407). This is very much subject to change, needs feedback.
- Create [D54409 - x86: New (un)idle IPIs for setting idle flag in scheduler](https://reviews.freebsd.org/D54409). This is very much subject to change, needs feedback.
- Create [D54410 - acpi: Implement s2idle loop](https://reviews.freebsd.org/D54410).
- Spend some time figuring out why resuming leaves system in weird state sometimes. I don't think this was happening before and I'm not really sure what could've changed. Still disabling bits one by one to see if anything fixes it.

#### **Challenges**

- A few issues where the system seems to be in a bit of a messed up state after resuming sometimes, i.e. filesystem will not resume correctly etc.

#### **Next Steps**

- Figure out system being left is weird state after resume.
- Commit some more of these revisions. I would really like to get the SPMC and s2idle patches in soon, because that's really the meat of the S0ix work.
- Figure out why loading tb at boot is causing a panic on my machine.

## **Reporting Period:** 2025-12-9 - 2025-12-16

### Project: Laptop S0i3 Support

**Overall Status:** At Risk

#### **Summary**

- Review [D54158 - pcib: Add a new IVAR returning the Thunderbolt generation of a bridge](https://reviews.freebsd.org/D54158).
- Spend some time debugging loading tb at boot causing panic (in tb_pcib).
- Remove PNP info to prevent PRs like 290827: 5bd839792b6a ("thunderbolt: Remove PNP info")

#### **Challenges**

- My machine doesn't seem to be exiting S0i3 with the new D-state code + USB4 driver loaded.

#### **Next Steps**

- Open revision for new ACPI D-state code and make sure all works.
- Figure out why I can't exit S0i3.
- Update SPMC and s2idle revision in response to olce@'s comments.
