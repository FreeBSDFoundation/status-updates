# December 2025 Status Update for Harald Eilertsen

[//]: <> (### Add weekly updates in reverse chronological order. ###)
## **Reporting Period:** 2025-12-17 - 2025-12-23

### Project: Improve OpenJDK on FreeBSD
#### **Overall Status:** On Track
#### **Summary**

This period was a bit short, as I was off yesterday and today.

Work done over the past week:

- More work on splitting BSD and Mac OS X serviceability agent implementation.
- Worked on getting reference aarch64 system set up for building and testing the OpenJDK port.
- Worked on bootstrapping OpenJDK builds using prebuilt JDK versions.
- Sending emails to the OpenJDK port maintainer alias (`java@FreeBSD.org`) no longer works, as it requires membership to the `freebsd-java` mailing list:
  - Reported to `postmaster@`
- Bugs addressed:
  - [#291743](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=291743): Java programs cannot play sound
- Reviews:
  - [battleblow/jdk #32](https://github.com/battleblow/jdk/pull/32):
General aarch64 cpu and hardware capabilities updates

#### **Completed Tasks**

None this period.

#### **Features Delivered**

None.

#### **Challenges**

None.

#### **Blockers**

None.

#### **Next Steps**

- Continue work on above tasks.
- Fix serviceability agent breakage.
- Fix remaining test failures in Serviceability Agent tests if still relevant.
- Begin work upstream openjdk/bsd-port
- Explore more around package dependencies to resolve jdk/jre/headless issues

#### **Open Questions and Discussion**


## **Reporting Period:** 2025-12-10 - 2025-12-16

### Project: Improve OpenJDK on FreeBSD
#### **Overall Status:** On Track
#### **Summary**

This past week I started work on splitting the BSD implementation of the Serviceability Agent fom the Mac OS X implementation. It has long been a problem that updates to the OS X code in this module breaks the BSD code. The first part of this work is to simply move the code from the `bsd` subdirectories to separate `macosx` directories, as well as renaming any classes and functions to go along with it. The plan is to get this part accepted upstream, and then add back the BSD related code as part of the BSD porting effort.

I also submitted a change to the various openjdk ports deprecating any ports no longer maintained upstream. This effectively leaves just the LTS releases of OpenJDK behind, in addition to whatever will be the latest release at any point in time. (In this case the lates release, version 25, is also an LTS release.)

This brought forward a long planned project to redo the way the OpenJDK builds are being bootstrapped. Since OpenJDK is in largely written in Java itself (in addition to C, C++ and assembly language), we need a working JDK to be able to build a JDK. The OpenJDK project support to use the current and previous OpenJDK versions to bootstrap the JDK build. Traditionally, the FreeBSD ports have depended on the previous version of the port directly, or in some cases, on a special `bootstrap-openjdk` port for some versions.

While this works, it means that to install the latest version of OpenJDK from ports, a number of the previous OpenJDK versions will be installed as well. Also the `bootstrap-openjdk` ports are installed to the system, but serve no purpose other than to bootstrap the build of a specific OpenJDK version.

Instead the plan is that we well keep around prebuilt packages that can be used to bootstrap each version of the OpenJDK. Also we will avoid installing these bootstrap packages to the system, but just extract them to the work directory during the build process. This should make it easier to install only exactly the version you need from ports, while making the bootstrapping of the builds more consistent and predictable.

Due to each OpenJDK port depending on the previous port, the new bootstrapping must be in place before the ports expire.

Finally, I spent some time to get set up on a reference server for building and testing the Aarch64 port of OpenJDK for FreeBSD. This is still ongoing.

#### **Completed Tasks**

- Marked unmaintained OpenJDK ports as deprecated:
  - Review: [D54176](https://reviews.freebsd.org/D54176)
  - Commits:
    - main: [6a245515c7c20](https://cgit.freebsd.org/ports/commit/?id=6a245515c7c2048e25413bd31d15e06a96319c8f)
    - 2025Q4: [2e748402abce1](https://cgit.freebsd.org/ports/commit/?h=2025Q4&id=2e748402abce1b16b8b3c8be36be69fd08a67177)

#### **Features Delivered**

None this period.

#### **Challenges**

- Get the mechanics around the new bootstrapping of the OpenJDK build in place.

#### **Blockers**

None.

#### **Next Steps**

- Fix serviceability agent breakage.
- Fix remaining test failures in Serviceability Agent tests if still relevant.
- Begin work upstream openjdk/bsd-port
- Explore more around package dependencies to resolve jdk/jre/headless issues

#### **Open Questions and Discussion**

## **Reporting Period:** 2025-12-03 - 2025-12-09

### Project: Improve OpenJDK on FreeBSD
#### **Overall Status:** On Track
#### **Summary**

- Tried building OpenJDK and running the jtreg tests for Aarch64 in a emulated
  VM powered by QEMU, but the results are not usable. Building is slow, but
  works. The tests run into timeouts and don't complete because the emulation
  is too slow.
- Updated java/openjdk25 port to version 25.0.1:
  - Review: [D43975](https://reviews.freebsd.org/D53975)
  - Commit: [c8fa124a26dc](https://cgit.freebsd.org/ports/commit/?id=c8fa124a26dc8469ad544e3cf888fa46a24084be)
- Spent most of the week debugging the remaining failing test cases in the Servicability Agent (SA).
- An upstream change in how the SA access threads in the debuggee VM has broken the relevant tests on FreeBSD, as I was already working in this area of the code before this was merged into the battleblow/jdk repo, I'm also now looking into this as well. This causes some disruption of progress, but unsure about how much yet.

#### **Completed Tasks**
#### **Features Delivered**

- Updated java(openjdk25 port to version 25.0.1

#### **Challenges**

- Serviceability Agent broken by upstream change.

#### **Blockers**
#### **Next Steps**

- Fix serviceability agent breakage.
- Fix remaining test failures in Serviceability Agent tests if still relevant.
- Begin work upstream openjdk/bsd-port
- Explore more around package dependencies to resolve jdk/jre/headless issues

#### **Open Questions and Discussion**

[//]: <> (##########################################################)
